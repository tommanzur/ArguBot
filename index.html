<!DOCTYPE html>
<html>
<head>
    <title>ArguBot Chat</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div id="chat-container" class="container">
        <!-- Agregar un título con el nombre del chatbot -->
        <h1 class="text-center">ArguBot Chat Interface</h1>
        <!-- Agregar un cuadro de texto con las instrucciones de uso -->
        <p class="text-center">Bienvenido a ArguBot, el chatbot interactivo diseñado para ayudarte 
            a explorar los temas cubiertos en la tesis doctoral de Tomás Manzur sobre 
            "Construcción de Argumentos y Controversias Socio-Técnicas",
            enfocándose en el Plan Provincial de Ordenamiento Territorial de Mendoza.
            Como usuario, tienes la oportunidad de adentrarte en varios aspectos de esta tesis, 
            incluyendo las complejidades de la planificación territorial, 
            la dinámica de las controversias socio-técnicas y un análisis detallado de argumentación. 
            Ya seas estudiante, investigador o simplemente alguien interesado en estos temas,
            ArguBot está aquí para guiarte a través de los contenidos y hallazgos de la tesis.
            Para empezar, escribe tu mensaje 
            en el cuadro de abajo y presiona el botón de enviar.</p>
        <div id="chat-messages" class="mb-3"></div>
        <div class="input-group mb-3">
                <input type="text" id="user-input" class="form-control" placeholder="Escribe tu mensaje...">
        </div>
        <div class="input-group mb-3">
                <button class="btn btn-primary" onclick="sendMessage()">Enviar</button>
        </div>
    </div>

    <script>
        function sendMessage() {
            const userInput = document.getElementById("user-input").value;
            appendMessage("user", userInput);
    
            fetch("http://127.0.0.1:5000/chat", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({ message: userInput }),
            })
            .then(response => response.json())
            .then(data => {
                appendMessage("assistant", data.response); // Cambiar 'data.message' por 'data.response'
            })
            .catch(error => console.error("Error:", error));
    
            document.getElementById("user-input").value = "";
        }

        function appendMessage(role, content) {
            const chatMessages = document.getElementById("chat-messages");
            const messageElement = document.createElement("div");
            // Usar las clases de Bootstrap para darle estilo de tarjeta al mensaje
            messageElement.className = `card mb-3 ${role}`;
            // Usar un elemento span para mostrar el nombre del remitente
            const nameElement = document.createElement("span");
            nameElement.className = "card-header";
            nameElement.textContent = role.charAt(0).toUpperCase() + role.slice(1);
            // Usar un elemento p para mostrar el contenido del mensaje
            const contentElement = document.createElement("p");
            contentElement.className = "card-body";
            contentElement.textContent = content;
            // Añadir los elementos al mensaje
            messageElement.appendChild(nameElement);
            messageElement.appendChild(contentElement);
            // Añadir el mensaje al contenedor de mensajes
            chatMessages.appendChild(messageElement);
        }

    </script>
</body>
</html>
